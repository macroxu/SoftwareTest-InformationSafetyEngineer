- [window防火墙](#window防火墙)
  - [window 防火墙包含哪些内容](#window-防火墙包含哪些内容)
- [linux 防火墙](#linux-防火墙)
  - [1. 查看防火墙tables](#1-查看防火墙tables)
  - [2. 清空防火墙tables](#2-清空防火墙tables)
  - [3. 设置防火墙默认规则](#3-设置防火墙默认规则)
  - [4. 设置允许回环接口(本机访问本机)](#4-设置允许回环接口本机访问本机)
  - [5. 设置允许已建立的或相关连的通行](#5-设置允许已建立的或相关连的通行)
  - [6. 设置允许某个IP访问本机的22端口](#6-设置允许某个ip访问本机的22端口)
  - [7. 设置允许本机访问外部的22端口](#7-设置允许本机访问外部的22端口)
  - [8. 设置允许本机访问外部的80端口](#8-设置允许本机访问外部的80端口)
  - [9. 设置允许本机访问外部的443端口](#9-设置允许本机访问外部的443端口)


# window防火墙
## window 防火墙包含哪些内容
>>Windows Defender防火墙是有状态主机防火墙，它允许你创建规则，确定允许哪些网络流量从网络进入设备，以及允许设备进入哪些网络流量，从而帮助保护设备的安全 发送到网络。  
>>Windows Defender防火墙还支持 Internet 协议安全性 (IPsec) ，你可以使用它从任何尝试与你的设备通信的设备进行身份验证。 需要身份验证时，无法作为受信任设备进行身份验证的设备无法与你的设备通信。 还可以使用 IPsec 要求对某些网络流量进行加密，以防止恶意用户可能附加到网络的网络数据包分析器读取该流量。

>>Windows Defender防火墙应是实现各种安全技术的综合安全解决方案的一部分，例如外围防火墙、入侵检测系统、虚拟专用网络 (VPN) 、用于无线和有线连接的 IEEE 802.1X 身份验证以及 IPsec 连接安全规则。

window 防火墙 常规的安全设计
+ 基本防火墙策略设计。 将传入和传出设备的网络流量限制为仅需要和授权的网络流量。
+ 域隔离策略设计。 防止作为域成员的设备接收来自非域成员设备的未经请求的网络流量。 可以建立更多的“区域”以支持某些设备的特殊要求，例如：
+ 服务器隔离策略设计。 仅允许一组有限的授权用户和设备访问服务器。 在域隔离设计中，通常可将此服务器配置为区域，但也可以配置为独立设计，从而为一小部分设备提供域隔离的许多优势。
+ 基于证书的隔离策略设计。 此设计是对前两个设计之一的补充，并支持其任何功能。 它使用部署到客户端和服务器的加密证书进行身份验证，而不是 Active Directory 中默认使用的 Kerberos V5 身份验证。 此设计使不属于 Active Directory 域的设备（例如运行非 Windows 操作系统的设备）能够参与隔离解决方案。

# linux 防火墙
## 1. 查看防火墙tables
```shell
iptables -L -n
```
## 2. 清空防火墙tables
```shell
iptables -F
```
## 3. 设置防火墙默认规则
```shell
iptables -P INPUT DROP
iptables -P OUTPUT DROP
iptables -P FORWARD DROP
```
## 4. 设置允许回环接口(本机访问本机)
```shell
iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT
```
## 5. 设置允许已建立的或相关连的通行
```shell
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT    
iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
```
## 6. 设置允许某个IP访问本机的22端口
```shell
iptables -A INPUT -p tcp -s
```
## 7. 设置允许本机访问外部的22端口
```shell
iptables -A OUTPUT -p tcp --dport 22 -j ACCEPT
```
## 8. 设置允许本机访问外部的80端口
```shell
iptables -A OUTPUT -p tcp --dport 80 -j ACCEPT
```
## 9. 设置允许本机访问外部的443端口
```shell
iptables -A OUTPUT -p tcp --dport 443 -j ACCEPT
 

 [root@ywgl3 ~]# iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere             state RELATED,ESTABLISHED
ACCEPT     icmp --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
DROP       tcp  --  10.196.22.1          anywhere             tcp dpt:ssh
ACCEPT     tcp  --  10.196.20.128/25     anywhere             state NEW tcp dpt:ssh
ACCEPT     tcp  --  10.196.22.0/25       anywhere             state NEW tcp dpt:ssh
DROP       tcp  --  anywhere             anywhere             tcp dpt:ssh
ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:ssh
ACCEPT     all  --  10.196.24.0/24       anywhere            
ACCEPT     all  --  10.196.23.0/24       anywhere            
ACCEPT     all  --  10.196.22.0/24       anywhere            
ACCEPT     all  --  10.196.21.0/24       anywhere            
ACCEPT     all  --  10.196.20.0/24       anywhere            
ACCEPT     all  --  192.168.0.0/16       anywhere            
ACCEPT     all  --  172.16.0.0/12        anywhere            
REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         
DOCKER-USER  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-1  all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere            

Chain DOCKER (5 references)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             172.18.0.2           tcp dpt:mysql
ACCEPT     tcp  --  anywhere             172.20.0.2           tcp dpt:webcache
ACCEPT     tcp  --  anywhere             172.20.0.3           tcp dpt:webcache

Chain DOCKER-ISOLATION-STAGE-1 (1 references)
target     prot opt source               destination         
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
DOCKER-ISOLATION-STAGE-2  all  --  anywhere             anywhere            
RETURN     all  --  anywhere             anywhere            

Chain DOCKER-ISOLATION-STAGE-2 (5 references)
target     prot opt source               destination         
DROP       all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            
RETURN     all  --  anywhere             anywhere            

Chain DOCKER-USER (1 references)
target     prot opt source               destination         
RETURN     all  --  anywhere             anywhere        